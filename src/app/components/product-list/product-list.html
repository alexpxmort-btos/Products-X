<div class="max-w-5xl mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">Produtos</h1>

  <!-- Barra de ações -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
    <input
      type="text"
      placeholder="Pesquisar produto..."
      [(ngModel)]="searchTerm"
      class="px-4 py-2 border rounded w-full sm:w-1/2 focus:outline-none focus:ring-2 focus:ring-blue-400"
    />
    <button
      (click)="openForm()"
      class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
    >
      Novo Produto
    </button>
  </div>

  <!-- Lista de produtos em cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div
      *ngFor="let p of filteredProducts()"
      class="bg-white rounded-lg shadow hover:shadow-lg transition p-4 flex flex-col justify-between"
    >
      <div>
        <h2 class="text-xl font-semibold mb-2">{{ p.name }}</h2>
        <p class="text-gray-600 mb-1">{{ p.description }}</p>
        <p class="font-bold text-green-600 mb-1">{{ p.price | currency:'BRL' }}</p>
        <p class="text-gray-500">Quantidade: {{ p.quantity }}</p>
      </div>
   <div class="mt-4 flex gap-3 justify-end">
  <!-- Ícone Editar -->
  <button (click)="editProduct(p)" mat-icon-button color="warn" aria-label="Editar">
    <mat-icon>edit</mat-icon>
  </button>

  <!-- Ícone Remover -->
  <button class="text-red-500" (click)="confirmDelete(p)" mat-icon-button  aria-label="Excluir">
    <mat-icon>delete</mat-icon>
  </button>
</div>

    </div>
  </div>
</div>

<!-- Drawer permanece igual -->
<div
  class="fixed top-0 right-0 h-full w-96 bg-white shadow-lg transform transition-transform duration-300 z-50"
  [class.translate-x-full]="!showForm"
  [class.translate-x-0]="showForm"
  (click)="$event.stopPropagation()"
>
  <div class="p-4 flex justify-between items-center border-b">
    <h2 class="text-xl font-bold">
      {{ selectedProduct ? 'Editar Produto' : 'Novo Produto' }}
    </h2>
    <button (click)="closeForm()" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
  </div>

  <div class="p-4">
    <app-product-form
      [product]="selectedProduct"
      (saved)="onSaved()"
    ></app-product-form>
  </div>
</div>

<!-- Modal de confirmação de delete -->
<div
  *ngIf="showDeleteModal"
  class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
>
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 class="text-xl font-bold mb-4">Confirmar Exclusão</h3>
    <p class="mb-6">Tem certeza que deseja excluir o produto "{{ productToDelete?.name }}"?</p>
    <div class="flex justify-end gap-4">
      <button
        (click)="cancelDelete()"
        class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400"
      >
        Cancelar
      </button>
      <button
        (click)="deleteProductConfirmed()"
        class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
      >
        Excluir
      </button>
    </div>
  </div>
</div>
